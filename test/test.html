<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yt API test</title>
</head>
<body>

    <script>
        //array of random search terms (made them code related)
        //const id = "EaWyG6vt7do";
        //const id = "dfl9KIX1WpU";

        const YOUTUBE_API_KEY = "AIzaSyD0y37S_BBtUc2prvtPkgIM4aE7i77TIek"; //API KEY
        const yt_link = "https://www.youtube.com/watch?v=I9nYSumuaLA"
        
        create_id = function(yt_url = String) {
            var id = yt_url.substr(-11);
            return id;
        }

        const url = `https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2Cstatistics&id=${create_id(yt_link)}&key=${YOUTUBE_API_KEY}`;
        
        execute = function() {
            fetch(url)
                .then(response => response.json())
                .then(data => {

                    var title = data.items[0].snippet.title;
                    var yt_url = `https://www.youtube.com/watch?v=${data.items[0].id}`;
                    var views = data.items[0].statistics.viewCount;
                    
                    try {
                        var thumbnail = data.items[0].snippet.thumbnails.maxres.url;
                    }
                    catch(err) {
                        var thumbnail = data.items[0].snippet.thumbnails.medium.url;
                        console.log(err);
                    }

                    console.log(data);

                    document.getElementById("title").innerHTML = title;
                    document.getElementById("views").innerHTML = `views: ${views}`;
                    document.getElementById("thumbnail_url").innerHTML = `thumbnail url: ${thumbnail}`;
                    document.getElementById("thumbnail").src = thumbnail;
                });
        }

        
    </script>

    <button onclick="execute()">execute</button>
    <h1 id="title"></h1>
    <h1 id="views"></h1>
    <h1 id="thumbnail_url"></h1>
    <img id="thumbnail" src="#" alt="song thumbnail" width="400px">

    
</body>
</html>